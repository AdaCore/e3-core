from e3.anod.loader import spec
from e3.anod.spec import Anod
from e3.fs import sync_tree


class dummyspec(spec('anod')):
    """Fake spec for the test suite.
    """
    @property
    def source_pkg_build(self):

        def prepare_src(repos, dest):
             sync_tree(list(repos.values())[0]['working_dir'],
                       dest)

        return [Anod.SourceBuilder(
            name='e3-fake-src',
            fullname=lambda x: 'e3-fake-src.tgz',
            prepare_src=prepare_src,
            checkout=['e3-fake-github'])]

    test_source_list = [Anod.Source('e3-fake-src', publish=True)]

    @Anod.primitive()
    def build(self):
        pass

    @Anod.primitive()
    def test(self):
        pass

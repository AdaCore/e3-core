from e3.anod.loader import spec
from e3.anod.spec import Anod


class e3fake(spec('anod')):
    """Fake spec for the test suite.
    """

    @property
    def source_pkg_build(self):

        def prepare_src(repos, dest):
            pass

        return [Anod.SourceBuilder(
            name='e3-fake-src',
            fullname=lambda x: 'e3-fake-src.tgz',
            prepare_src=prepare_src,
            checkout=['e3-fake-github'])]

    test_source_list = [Anod.Source('e3-fake-src', publish=True)]

    @Anod.primitive()
    def test(self):
        self.shell('ls', cwd=self['SRC_DIR'])
